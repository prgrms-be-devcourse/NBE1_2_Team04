# [사용자]

### 회원가입

- 서버 로그인을 이용해 회원가입
    1. 회원가입 할 이메일 입력 → 이메일 확인버튼을 이용해 유효한 이메일인지 확인
    2. 사용할 패스워드 입력(비밀번호 형식이..) → 패스워드 한번 더 입력받음
    3. 본인 이름, 휴대폰 번호, 성별 입력
    4. 위의 양식이 맞게 입력되면 회원가입 완료
- 소셜 로그인을 이용해 회원가입 가능
    - 네이버, 카카오, 구글 중 하나로 회원가입 진행

### 로그인

- 서버 로그인을 이용해 로그인
    1. 이메일, 패스워드를 사용해 로그인
        - 틀린 로그인 정보를 입력한 경우

          → 올바르지 않은 로그인 메세지 출력 → 로그인 실패

        - 올바른 로그인 정보를 입력한 경우

          → 로그인 성공

- 소셜 로그인을 이용해 로그인
    - 네이버, 카카오, 구글 중 하나로 회원가입 진행

### 아이디/비밀번호 찾기

- 아이디 찾기
    - 이름, 전화번호 인증
        - 올바른 인증을 거쳤을 경우

          → 가입되어 있는 이메일 출력

        - 올바르지 않은 인증을 거쳤을 경우

          → 가입되어 있지 않은 회원 메세지 출력

- 비밀번호 찾기
    - 이메일, 이름, 전화번호 인증
        - 올바른 인증을 거쳤을 경우

          → 새로운 비밀번호 설정

        - 올바르지 않은 인증을 거쳤을 경우

          → 가입되어 있지 않은 회원 혹은 올바르지 않은 인증 메세지 출력


### 회원정보 수정

- 이름, 전화번호 변경
    - 이름, 전화번호가 빈 칸으로 둘 경우

          → 변경하지 않음

    - 이름, 전화번호를 채울 경우

          → 원래 비밀번호와 비밀번호 확인을 통해 해당 내용 변경

- 비밀번호 변경
    - 원래 비밀번호를 확인 후 올바른 비밀번호를 입력할 경우

      → 새 비밀번호와 비밀번호 확인이 일치할 경우 비밀번호 변경

    - 원래 비밀번호와 동일하지 않을 경우

      → 올바르지 않은 비밀번호 메세지 출력


# [팀]

### 팀 생성

- 팀 생성
    1. 팀 생성 버튼 선택
    2. 팀 정보 입력(팀 명, 팀 설명, 활동지역)
    3. 팀 생성 완료

### 팀원 초대

1. 팀원 초대
    1. 팀원 초대 버튼 선택
    2. 회원 검색 창으로 이동(teamMemberApi로 이동?)
    3. 회원 검색창에서 검색
    4. 팀원의 이메일을 통해 검색
    5. 초대할 회원을 선택(List에 저장)
    6. 초대할 인원을 모두다 검색했으면 확인 버튼을 통해 회원 초대
2. 팀원 초대 완료

### 팀 정보 조회

1. 팀 버튼 선택
2. 경기 예약 일정 조회(team/{teamId)

   → teamId로 조회한 예약 테이블 정보(날짜만)

3. 팀 정보 버튼을 눌러 팀 정보 조회(team/{teamId}/info)
    1. 팀 프로필 —>description
    2. 팀 이름 —> name
    3. 팀 지역 —> location
    4. 팀 전적 —> totalRecord(win, lose, draw)
    5. 팀 평가 —> teamRate
    6. ~~팀 평균 나이 —> member의 나이 평균~~
    7. 팀 성별 —> member의 성별 별 count

### 팀 정보 수정

1. 팀 버튼 선택
2. 팀 정보 버튼을 눌러 팀 정보 조회
3. 수정 버튼을 정보 수정 후 저장(put)

   <수정 가능 내역>

    1. 팀 이름
    2. 팀 설명
    3. 팀 지역

### 팀 일정 조회

1. 팀 버튼 선택
2. 경기 예약 일정 조회(예약 상세내역 까지)
3. 캘린더를 선택하여 팀 일정을 리스트로 조회
    1. 날짜
    2. 시간
    3. 성별
    4. 상태
    5. 구장

### 경기 예약 투표

1. 경기 예약 버튼 선택
2. 장소 선택 (선호 장소가 저장되지 않은 경우)
3. 날짜 및 시간 선택
4. 마감 시간이 된 경우 다수결로 경기 예약
5. 참가하는 팀원이 부족한 경우 상태를 RECRUITING로 변경하고 용병 모집 알림

### 경기 예약

1. 마감된 투표의 정보를 기반으로 경기 예약을 생성한다( 경기 인원이 가득 찼을 경우 상태를 CONFIRMED 으로)
    1. 투표의 정보 (장소 및 시간)
    2. 경기에 참여하는 인원
    3. 경기에 참여하는 인원들의 성별

### 용병 모집

1. 경기 예약이 끝나고 경기에 참가하는 팀원이 부족한 경우 용병 모집 알림
2. 용병 모집을 선택한 경우 용병 모집 게시글 올림 ( 용병 모집 진행 )
3. 용병 신청이 들어오면 수락 or 거절할 수 있음
4. 용병을 모집하여 경기 참여 인원이 채워질 경우 경기 예약 상태를 CONFIRMED로 변경
5. 경기 날짜 12시간 전까지 용병을 구하지 못했을 경우 자동으로 예약 취소 ( 예약 상태를 CANCELLED로 변경 )

### 용병 참여

1. 용병 모집 게시판에서 게시글들을 확인
2. 용병 모집 신청 참여 인원 상태 (PENDING)
    1. 용병 신청이 수락된다면 상태를 (ACCEPT) 변경하고 채팅방에 참여하게 한다.
    2. 용병 신청이 거절 된다면 상태를 (IGNORED) 변경한다.
    3. 용병 신청이 수락되지 않은 채 모집이 마감된다면 상태를 (IGNORED) 변경한다.

### 경기 매칭 조회

1. 경기 예약 (option 용병 모집)이 완료되면 매칭 가능
2. 같은 시간과 구장을 예약한 팀들이 리스트로 노출
3. 같은 시간, 구장을 예약한 팀이 없다면 비슷한 시간, 장소로 노출 ( 할 수 있다면.. )
4. 신청을 눌러 경기 요청을 할 수 있음

### 경기 매칭 요청

1. 경기 예약을 마치면 경기 매칭 리스트에 예약 내용이 올라감
2. 같은(비슷한) 시간과 구장의 경기 예약 리스트 중, 경기를 요청하거나 받을 수 있음
3. 경기 요청을 수락하면 경기가 성사되고 상세 구장을 예약하고 결제할 수 있음

### 경기 예약 취소

### 경기 매칭 취소

### 경기 종료

1. 경기에 참여한 팀들의 win/draw/lose count 업데이트
2. 경기에 참여한 팀장이 상대 팀 평가를 입력
3. 임시 팀 해체
    1. 임시 팀 채팅방 비활성화
    2. 매칭 상태를 (DONE)변경

### 팀 채팅

- 채팅방 생성
    1. 팀 생성 시 해당 팀의 채팅방 자동 생성됨
    2. 팀원 초대 될 때마다 채팅방에 해당 멤버 자동 추가
- 채팅
    1. 채팅방 입장
    2. 이전 대화 내용 표시(DB에서 최신 순으로 조회)
    3. 소켓 통신으로 실시간 채팅

### 팀의 지난 일정 조회

1. 시합 일정 테이블 조회?

# [사업자]

### 경기장 등록

1. 로그인
2. 사용자가 사업자인지 확인한다. 사용자가 사업자라면 구장을 등록 할 수 있도록 한다.
3. 구장 이름,구장 주소, 구장 연락처, 구장 설명, 구장 경도,위도를 입력해야한다. 최소 1가지 이상의 상세 구장을가지고 있어야 한다.
4. 상세 구장에 대한 정보는 상세구장이름, 상세구장설명, 요금을 입력해야한다.

### 구장 예약

1. 예약을 통해서 시합이 결정되면 결제 요청을 예약자에게 보낸다.
2. 예약자의 결제 요청이 완료되면 구장이 예약된다.
3. 구장이 예약되면 다른 사용자들은 해당 구장의 해당 시각을 이용 할 수 없다.

### 구장 예약 결제

1. 시합이 결정되면 결제 요청이 예약자에게 보내진다.
2. Toss Payments를 통해서 풋살 경기장 예약 금액 결제 요청을 보낸다.
3. 결제 완료시 서버에 결제 금액, 내용이 이상이 없는 지 확인한다.
4. 결제가 완료되며 예약으로 넘어간다.

### 구장 예약 결제 취소

1. 예약이 된 구장을 취소 버튼을 눌러 취소할 수 있다.
    1. 5일 전 - 무료 취소
    2. 4일 전 - 50% 환불
    3. 3일 전 - 40% 환불
    4. 2일 전 - 30% 환불
    5. 1일 전 - 15% 환불
    6. 당일 - 0% 환불
2. 예약이 취소 됨에 따라 위약금을 제외한 금액을 Toss Payments에 결제 취소 요청을 보낸다.
3. 은행 사정에 따라 O 영업일 이내에 결제 금액 환불이 이루어 진다.